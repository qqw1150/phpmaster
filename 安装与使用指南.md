# PHP环境管理器安装与使用指南

## 一、环境需求

### Windows系统
- Windows 7 SP1 或更高版本（推荐 Windows 10/11）
- 至少 2GB 可用内存
- 至少 10GB 可用磁盘空间
- 管理员权限

### Linux系统
- Ubuntu 18.04+、CentOS 7+、Debian 10+或其他主流发行版
- 至少 2GB 可用内存
- 至少 10GB 可用磁盘空间
- sudo/root权限

## 二、下载与安装

### Windows平台安装

1. 从官网下载最新版Windows安装包
2. 双击安装包启动安装向导
3. 选择安装位置（建议安装在非系统盘）
4. 选择是否创建桌面快捷方式
5. 点击"安装"按钮开始安装
6. 安装完成后点击"完成"

#### 便携式安装（免安装版）
1. 从官网下载最新版便携式压缩包
2. 解压到任意位置
3. 双击"php-env-manager.exe"启动应用

### Linux平台安装

#### 使用安装脚本（推荐）
```bash
# 下载安装脚本
curl -fsSL https://php-env-manager.example.com/install.sh -o install.sh

# 执行安装脚本
sudo bash install.sh
```

#### 手动安装
1. 从官网下载最新版Linux安装包
2. 解压安装包：
```bash
tar -xzf php-env-manager-linux-x64.tar.gz
```
3. 移动到应用目录：
```bash
sudo mv php-env-manager /opt/
```
4. 创建符号链接：
```bash
sudo ln -s /opt/php-env-manager/bin/php-env-manager /usr/local/bin/php-env-manager
```

## 三、初始化配置

首次启动应用后，需要进行初始化配置：

1. 选择软件界面语言
2. 选择要安装的核心组件：
   - Web服务器（Nginx/Apache）
   - 数据库（MySQL/MariaDB）
   - PHP版本（可多选）
   - 扩展工具（Redis、Memcached等）
3. 设置各服务的端口号（如有冲突会自动提示）
4. 设置数据存储位置
5. 点击"开始安装"按钮安装所选组件

## 四、基本使用

### 服务管理

#### 启动/停止服务
1. 在主界面服务控制面板中，找到需要管理的服务
2. 点击对应服务旁的"启动"或"停止"按钮

![服务控制面板示例](images/service_panel.png)

#### 设置开机自启
1. 进入"设置" > "服务设置"
2. 勾选需要开机自启的服务
3. 点击"保存"按钮

### 创建网站

1. 点击主页面的"新建网站"按钮
2. 填写站点基本信息：
   - 站点名称
   - 文档根目录
   - 域名（本地域名）
3. 选择Web服务器（Nginx/Apache）
4. 选择PHP版本
5. 配置SSL（可选）
6. 点击"创建"按钮完成站点创建

![网站创建向导示例](images/website_wizard.png)

### PHP版本管理

#### 安装新PHP版本
1. 进入"PHP版本管理"页面
2. 点击"添加PHP版本"按钮
3. 从列表中选择需要安装的PHP版本
4. 点击"安装"按钮

#### 切换默认PHP版本
1. 进入"PHP版本管理"页面
2. 在PHP版本列表中找到目标版本
3. 点击"设为默认"按钮

#### 为站点指定PHP版本
1. 进入"网站管理"页面
2. 找到需要设置的站点，点击"编辑"
3. 在站点设置中选择PHP版本
4. 点击"保存"按钮

### 数据库管理

#### 创建数据库
1. 进入"数据库管理"页面
2. 点击"新建数据库"按钮
3. 填写数据库名称
4. 设置字符集和排序规则
5. 点击"创建"按钮

#### 创建数据库用户
1. 进入"数据库管理" > "用户管理"页面
2. 点击"新建用户"按钮
3. 填写用户名和密码
4. 设置权限
5. 点击"创建"按钮

#### 访问phpMyAdmin
1. 在主界面点击"工具" > "phpMyAdmin"，或直接点击数据库服务旁的"phpMyAdmin"图标
2. 系统会自动打开浏览器访问phpMyAdmin登录页面

### 域名管理

#### 添加本地域名
1. 进入"域名管理"页面
2. 点击"添加域名"按钮
3. 输入域名和对应IP地址
4. 点击"保存"按钮

#### 批量导入域名
1. 进入"域名管理"页面
2. 点击"导入"按钮
3. 选择hosts格式的文本文件
4. 点击"导入"按钮

## 五、高级功能

### SSL证书配置

#### 生成自签名证书
1. 进入"SSL证书管理"页面
2. 点击"生成自签名证书"按钮
3. 填写证书信息
4. 点击"生成"按钮

#### 配置Let's Encrypt免费证书
1. 进入"SSL证书管理"页面
2. 点击"申请Let's Encrypt证书"按钮
3. 填写域名信息
4. 选择验证方式
5. 点击"申请"按钮

### FTP服务配置

1. 进入"FTP管理"页面
2. 点击"添加FTP用户"按钮
3. 填写用户信息：
   - 用户名
   - 密码
   - 根目录
   - 权限
4. 点击"保存"按钮

### 安全配置

#### 配置防火墙
1. 进入"安全管理" > "防火墙设置"
2. 设置IP白名单/黑名单
3. 配置端口访问规则
4. 点击"保存"按钮

#### 配置网站防护
1. 进入"安全管理" > "网站防护"
2. 选择需要保护的网站
3. 配置CC攻击防护参数
4. 配置网站防篡改设置
5. 点击"保存"按钮

## 六、监控与日志

### 查看服务状态
1. 在主界面查看服务运行状态概览
2. 点击具体服务查看详细状态信息

### 查看资源使用情况
1. 进入"监控"页面
2. 查看CPU、内存、磁盘等资源使用情况

### 查看日志
1. 进入"日志"页面
2..选择服务和日期范围
3. 查看筛选后的日志记录

## 七、常见问题解决

### 端口冲突解决
1. 当提示端口被占用时，点击"查找可用端口"
2. 系统会自动推荐可用端口
3. 点击"应用"使用推荐端口，或手动输入其他端口号

### 服务无法启动
1. 检查服务状态和错误日志
2. 根据错误信息进行排查
3. 常见解决方案：
   - 检查端口是否被占用
   - 检查配置文件是否正确
   - 检查依赖项是否已安装

### 网站访问错误
1. 检查Web服务器和PHP是否已启动
2. 检查网站配置是否正确
3. 检查本地域名解析是否正确
4. 查看错误日志获取详细信息

## 八、更新与升级

### 自动更新
1. 应用会定期检查新版本
2. 当有新版本时，会在主界面显示更新提示
3. 点击"立即更新"按钮进行更新

### 手动更新
1. 进入"设置" > "检查更新"
2. 如有新版本，点击"下载并安装"

## 九、卸载

### Windows系统
1. 进入控制面板 > 程序和功能
2. 找到"PHP环境管理器"，点击"卸载"
3. 按照向导完成卸载

### Linux系统
```bash
sudo /opt/php-env-manager/uninstall.sh
```

## 十、联系与支持

- 官方网站：[https://php-env-manager.example.com](https://php-env-manager.example.com)
- 技术支持：support@php-env-manager.example.com
- 问题反馈：[Issues页面](https://github.com/php-env-manager/issues)
- 社区论坛：[用户论坛](https://forum.php-env-manager.example.com) 